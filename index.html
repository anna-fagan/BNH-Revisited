<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Anna Fagan">
    <link href="/css/style.css" rel="stylesheet" type="text/css">
    <title>Javascript Bear Ninja Hunter</title>
  </head>
  <body>
    <h1>Bear, Ninja, Hunter</h1>
    <p>Play against the computer!</p>
    <ul>
      <li>The Bear beats the Hunter</li>
      <li>The Hunter beats the Ninja</li>
      <li>The Ninja beats the Hunter</li>
    </ul>
    <p>Click a button below to select your choice</p>
    <div class="choice">
      <button onclick="result = playGame('bear')">Bear</button>
      <button onclick="result = playGame('ninja')">Ninja</button>
      <button onclick="result = playGame('hunter')">Hunter</button>
    </div>
    
    <div class="output" id="output">
      <h2 id="result"></h2>
    </div>
    <p id="games-played"></p>
    <p id="games-won"></p>
    <div class="choice" id="play-again">
    </div>
    <script>
      //  Set up empty varaible for results
      let result;

      // Set up constants to make a new button
      const buttonDiv = document.getElementById('play-again');
      const createButton = document.createElement('button');
      const playAgainDiv = document.getElementById('play-again');

      // create a function that re hides the divs and clears the user choice
      let playAgain = () =>{
        const buttonDiv = document.getElementById('play-again');
        const createButton = document.createElement('button');
        const outputDiv = document.getElementById('output');
        const playAgainDiv = document.getElementById('play-again');
        outputDiv.style.display = 'none';
        playAgainDiv.style.display = 'none';
        choice = null;
        result = null;
        gamesPlayed++;
      }

      // create function for running the game every time one of the buttons is selected
      function playGame(uChoice){
        // create computer choices aray
        const cChoices= ['bear','ninja','hunter'];
        
        // Generate a random number to put into the array
        randomNumber= Math.floor(Math.random()*3);

        // Set cChoice to name in array that corresponds to int
        compChoice= cChoices[randomNumber];

        // run choice through the switch case
        switch (uChoice){
          case 'bear':
            if (compChoice ==='ninja'){
              result='win';
            } else if (compChoice ==='hunter'){
              result='lose';
            } else{
              result='tie';
            }
            break;
          case 'ninja':
            if (compChoice ==='ninja'){
              result='tie';
            } else if (compChoice ==='hunter'){
              result='win';
            } else{
              result='lose';
            }
            break;
          case 'hunter':
            if (compChoice ==='ninja'){
              result='lose';
            } else if (compChoice ==='hunter'){
              result='tie';
            } else{
              result='win';
            }
            break;
          }
        // Make a variable to display div for results
        let outputDiv = document.getElementById('output');
        if (outputDiv.display === 'none'){
          outputDiv.style.display = 'inline-block';
        }

        // Put results inside the div
        let achoice = `You picked ${uChoice}! The computer picked ${compChoice}!`;
        document.getElementById("result").innerHTML = `${achoice} You${result}!`;

        // Make a variable and display play again
        let playAgainDiv = document.getElementById('play-again').innerHTML;
        if (playAgainDiv.display === 'none'){
          playAgainDiv.style.display = 'inline-block'
        }

        // Assign onclick value of the createButton variable to the playAgain function
        createButton.textContent = 'Play Again?';
        createButton.onclick = playAgain();
        // Create button inside the play again div
        buttonDiv.appendChild(createButton);
      }

      // Set up counter for number of games played
      let gamesPlayed = 0;

      // Set up counter for number of times won
      let timesWon = 0;
    </script>
  </body>